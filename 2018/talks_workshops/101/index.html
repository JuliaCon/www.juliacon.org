
<!DOCTYPE html>
<html>
<head>
    
    <title>CombineML for Seamless Ensembling of Machine Learning Models from Scikit-learn, Caret, and Julia &mdash; JuliaCon 2018, London, UK</title>
    <meta name="description" content="CombineML for Seamless Ensembling of Machine Learning Models from Scikit-learn, Caret, and Julia &mdash; JuliaCon 2018, London, UK" />
    <meta name="viewport" id="viewport" content="width=device-width,maximum-scale=1.5" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JuliaCon2018" />
    <meta name="twitter:image" content="http://juliacon.org/2018/assets/img/julia-logo-dots.png" />

    <meta property="og:site_name" content="JuliaCon 2018" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="JuliaCon 2018" />
    <meta property="og:description" content="CombineML for Seamless Ensembling of Machine Learning Models from Scikit-learn, Caret, and Julia &mdash; JuliaCon 2018, London, UK" />
    <meta property="og:url" content="http://juliacon.org/2018/" />
    <meta property="og:image" content="http://juliacon.org/2018/assets/img/julia-logo-dots.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="1112" />

    <link rel="stylesheet" href="/2018/assets/css/reset.css">
    <link rel="stylesheet" href="/2018/assets/css/util.css">
    <link rel="stylesheet" href="/2018/assets/css/grid.css">
    <link rel="stylesheet" href="/2018/assets/css/type-scale.css">

    <link rel="shortcut icon" type="image/png" href="/favicon.png">

    <script src="https://use.typekit.net/orl3mkt.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link rel="stylesheet" href="/2018/assets/css/style.css">
    <!-- <link href="https://fonts.googleapis.com/css?family=Nunito:200,400,700" rel="stylesheet"> -->

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
</head>
<body>
    
<div class="container-fluid earlybird">
  <div class="container">
    <div class="alert">
       Videos from JuliaCon <a href="https://www.youtube.com/playlist?list=PLP8iPy9hna6Qsq5_-zrg0NTwqDSDYtfQB"> are now available online</a>
    </div>
  </div>
</div>


<div class="u-rows-1 u-hbox u-items-center u-justify-space-between container u-center">
  <div class="u-title-medium u-hpad u-hbox u-items-center u-cols-4" style="margin:auto">
    <a href="/2018/">
        <img src="/2018/assets/img/logo.svg" style="width: 200px; height: auto" title="JuliaCon">
    </a>
    <div class="u-hskip-half"></div>
    <a href="/2018/" class="link-color-inherit">
        <div class="u-title-large u-futura" style="font-size:42px; margin-top: 8px; color: #888">2018</div>
    </a>
  </div>
  <div class="u-futura u-uppercase previous-editions-menu" style="margin:auto">Previous editions: <a href="/2017/">2017</a> | <a href="/2016/">2016</a> | <a href="/2015/">2015</a> | <a href="/2014/">2014</a></div>
</div>


<div class="container-fluid main-menu">
  <div class="container">
    <nav class="navbar navbar-expand-md navbar-dark">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <li>
            <img src="/2018/assets/img/waving-flag.gif" style="position: relative; top: 10pt; height: 60pt; margin-top: -37pt;">
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/2018">JuliaCon 2018</a>
          </li>
          <!-- li class="nav-item">
            <a class="nav-link" href="/2018/cfp">call for proposals</a>
          </li -->
          <li class="nav-item">
            <!-- <a class="nav-link" href="/2018/all_talks.html">talks & workshops</a> -->
            <a class="nav-link" href="/2018/all_talks.html">talks & workshops</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/2018/schedule">schedule</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/2018/tickets.html">buy tickets</a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</div>


<link rel="stylesheet" href="/2018/assets/css/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/2018/assets/css/jssocials.css">
<link rel="stylesheet" href="/2018/assets/css/jssocials-theme-minima.css">

<div class="u-vskip-3"></div>
<div class="u-vskip-2"></div>

<div class="container" id="talk">
  <div class="header-talks">
    <div class="avatar-talks">
      
      <img class="avatar-circle-talks" src="http://avatars.schd.ws/1/6a/5709012/avatar.jpg.320x320px.jpg?096">
      
      <div class="speaker-talks">
        Paulito Palmes
        <p class="affiliation">
        
          IBM Dublin Research Lab
        
        </p>
      </div>
    </div>
  </div>

  <div class="u-vskip-3"></div>
  <div class="u-vskip-2"></div>

  <hr class="divider" />
  <nav class="navbar">
    <a href="/2018/all_talks.html" class="back-link">⤺ All talks</a>
  </nav>
  <hr class="divider" />

  <div class="content-box-talk">
    <h2>CombineML for Seamless Ensembling of Machine Learning Models from Scikit-learn, Caret, and Julia</h2>

    <p>
<h3 id="create-learners-for-parallel-processing">Create learners for parallel processing</h3>

<p>nprocs() ==1 &amp;&amp; addprocs()</p>

<p>@everywhere import CombineML.Util</p>

<p>@everywhere import CombineML.Transformers</p>

<p>@everywhere import RDatasets</p>

<p>@everywhere CU=CombineML.Util</p>

<p>@everywhere CT=CombineML.Transformers</p>

<p>@everywhere RD=RDatasets</p>

<p>#Scikit wrapper that provides access to scikit learners</p>

<p>@everywhere sk_gblearner = CT.SKLLearner(</p>

<p>  Dict( :output =&gt; :class,</p>

<p>          :learner =&gt; “GradientBoostingClassifier”,</p>

<p>          :impl_options =&gt; Dict()</p>

<p>   )
)</p>

<h3 id="select-best-learner-from-the-set">Select best learner from the set</h3>

<p>@everywhere best_learner = CT.BestLearner(</p>

<p>      Dict(</p>

<p>          :learners =&gt; [sk_gblearner,CT.PrunedTree(),CT.RandomForest()],</p>

<p>          :output =&gt; :class, :score_type =&gt; Real, :learner_options_grid =&gt; nothing</p>

<p>      )</p>

<p>)</p>

<h3 id="learners-in-voting-committee">Learners in voting committee</h3>

<p>@everywhere vote_learner = CT.VoteEnsemble(</p>

<p>     Dict(</p>

<p>       :output =&gt; :class,</p>

<p>       :learners =&gt; [</p>

<p>          CT.PrunedTree(), CT.DecisionStumpAdaboost(),</p>

<p>          CT.RandomForest(),sk_gblearner,best_learner</p>

<p>       ]</p>

<p>  )</p>

<p>)</p>

<h3 id="learners-in-stack-ensemble">Learners in stack ensemble</h3>

<p>@everywhere stack_learner = CT.StackEnsemble(</p>

<p>  Dict(</p>

<p>    :learners =&gt; [</p>

<p>         CT.PrunedTree(), CT.RandomForest(),</p>

<p>         CT.DecisionStumpAdaboost(),</p>

<p>         best_learner, sk_gblearner</p>

<p>     ],</p>

<p>    :stacker =&gt; CT.RandomForest()</p>

<p>  )
)</p>

<h3 id="create-a-pipeline">Create a Pipeline</h3>

<p>pipeline = CT.Pipeline(</p>

<p>  Dict(</p>

<p>    :transformers =&gt; [</p>

<p>        CT.OneHotEncoder(), # Encodes nominal features into numeric</p>

<p>        CT.Imputer(), # Imputes NA values</p>

<p>        CT.StandardScaler(), # Standardizes features</p>

<p>        learner </p>

<p>    ]</p>

<p>  )
)</p>

<h3 id="sample-dataset-from-iris">Sample dataset from Iris</h3>

<p>dataset = RD.dataset(“datasets”, “iris”)</p>

<p>instances = Array(dataset[:, 1:(end-1)])</p>

<p>labels = Array(dataset[:, end])</p>

<h3 id="split-into-training-and-test-sets">Split into training and test sets</h3>

<p>(train_ind, test_ind) = CU.holdout(size(instances, 1), 0.3)</p>

<h3 id="train-and-predict">Train and Predict</h3>

<p>CT.fit!(pipeline, instances[train_ind, :], labels[train_ind])</p>

<p>predictions = CT.transform!(pipeline, instances[test_ind, :])</p>

<h3 id="compute-accuracy">Compute accuracy</h3>

<p>result = CU.score(:accuracy, labels[test_ind], predictions)</p>

<h1 id="evaluate-ensembles-in-parallel">Evaluate Ensembles in Parallel</h1>

<p>@everywhere function predict(learner)</p>

<p>  dataset = RD.dataset(“datasets”, “iris”)</p>

<p>  instances = Array(dataset[:, 1:(end-1)])</p>

<p>  labels = Array(dataset[:, end])</p>

<p>  (train_ind, test_ind) = CU.holdout(size(instances, 1), 0.3)</p>

<p>  pipeline = CT.Pipeline(</p>

<p>    Dict(</p>

<p>      :transformers =&gt; [</p>

<p>           CT.OneHotEncoder(), # Encodes nominal features into numeric</p>

<p>           CT.Imputer(), # Imputes NA values</p>

<p>           CT.StandardScaler(), # Standardizes features</p>

<p>           CT.PCA(),</p>

<p>           learner  </p>

<p>      ]</p>

<p>    )</p>

<p>  )</p>

<p>  CT.fit!(pipeline, instances[train_ind, :], labels[train_ind]);</p>

<p>  predictions = CT.transform!(pipeline, instances[test_ind, :]);</p>

<p>  result = CU.score(:accuracy, labels[test_ind], predictions)</p>

<p>  return result</p>

<p>end</p>

<p>using DataFrames</p>

<p>function main(trials)</p>

<p>  learners=Dict(</p>

<p>       :gradientboosting=&gt;sk_gblearner, :randomforest=&gt;CT.RandomForest(),</p>

<p>       :adaboost=&gt;CT.DecisionStumpAdaboost(), :votelearner=&gt;vote_learner,</p>

<p>       :bestlearner=&gt;best_learner, :stacklearner=&gt;stack_learner
  )</p>

<p>  models=collect(keys(learners))</p>

<p>  ctable=@parallel (vcat) for model in models</p>

<p>     acc=@parallel (vcat) for i=1:trials</p>

<p>        res=predict(learners[model])</p>

<p>        println(model,” =&gt; “,round(res))</p>

<p>        res</p>

<p>     end</p>

<p>     [model round(mean(acc)) round(std(acc)) length(acc)]</p>

<p>  end</p>

<table>
  <tbody>
    <tr>
      <td>  sorted=sortrows(ctable,by=(x)-&gt;x[2],rev=true)</td>
      <td>&gt; DataFrame</td>
    </tr>
  </tbody>
</table>

<p>  rename!(sorted,Dict(:x1=&gt;:model,:x2=&gt;:mean_acc,:x3=&gt;:std_acc,:x4=&gt;:trials))</p>

<p>  return sorted</p>

<p>end</p>

<p>const trials = 5</p>

<p>res = main(trials)</p>

<p>@show res</p>

<h3 id="known-limitations">Known Limitations</h3>

<ol>
  <li>
    <p>Learners have only been tested on instances with numeric features.</p>
  </li>
  <li>
    <p>Inconsistencies may result in using nominal features directly without a numeric transformation (i.e. OneHotEncoder).</p>
  </li>
</ol>
</p>

    <h3>Speaker's bio</h3>
    <p><p>I am a research scientist at the IBM Dublin Research Lab working in the areas of analytics, datamining, machine learning, and AI. I finished my Doctor of Engineering degree from the Toyohashi University of Technology in Japan (2005). I have a Master’s degree in Computer Science majoring in Artificial Intelligence (Ateneo de Manila University, 1995) and a Bachelor’s degree in Applied Mathematics (University of the Philippines in the Visayas, 1991). I used to work as a technical staff for two years in the Neuroinformatics Lab of RIKEN Brain Science Institute, Japan before finishing my DEng degree. I spent a total of 4 years as a Postdoctoral Fellow in the National University of Singapore and the National Neuroscience Institute working on diverse topics such as context-aware reasoning, datamining models for activity recognition in smarthome environment, detecting biomarkers for Parkinson’s Disease by image processing of fMRI and DTI images, and automated diagnosis of movement disorder for intelligent healthcare. Moreover, I held an Asst. Professorship for a total of 6 years in the University of the Philippines and Ateneo de Manila University. My research interests include datamining, optimization, development of intelligent agents using machine learning and evolutionary computation, neuroinformatics, and biomedical engineering.</p>
</p>

    
  </div>

  <hr class="divider" />

  <div id="share"></div>

  <hr class="divider" />

  <nav class="navbar">
    <a href="/2018/all_talks.html" class="back-link">⤺ All talks</a>
  </nav>
</div>

<div class="u-vskip-3"></div>

<footer class="container-fluid" align="center">
  <div class="container">
    <div class="u-vskip"></div>
    <div class="u-vskip"></div>
    <div class="container">
      <div class="u-body-extra-small">
  <p>© 2014-2020 <a href="http://juliacon.org">JuliaCon.org</a> All rights reserved.
  <a href="https://github.com/JuliaCon/juliacon.github.io">Fork this site on Github</a> or
  open a <a href="https://github.com/JuliaCon/juliacon.github.io/issues">bug report</a>.</p>

</div>

    </div>
    <div class="u-vskip"></div>
  </div>
</footer>

<script src="/2018/assets/js/jssocials.min.js"></script>
<script>
    $("#share").jsSocials({
        shares: ["email", "twitter", "facebook", "linkedin", "googleplus", "stumbleupon", "pocket", "whatsapp"],
        showLabel: false,
        showCount: false,
        shareIn: "popup"
    });
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script src="/2018/assets/js/jquery.sticky.js"></script>
    <script src="/2018/assets/js/juliacon.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-28835595-3', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
    </script>
</body>
</html>
