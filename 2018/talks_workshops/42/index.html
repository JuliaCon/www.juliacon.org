
<!DOCTYPE html>
<html>
<head>
    
    <title>Low-Level Systems Programming in High-Level Julia &mdash; JuliaCon 2018, London, UK</title>
    <meta name="description" content="Low-Level Systems Programming in High-Level Julia &mdash; JuliaCon 2018, London, UK" />
    <meta name="viewport" id="viewport" content="width=device-width,maximum-scale=1.5" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JuliaCon2018" />
    <meta name="twitter:image" content="http://juliacon.org/2018/assets/img/julia-logo-dots.png" />

    <meta property="og:site_name" content="JuliaCon 2018" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="JuliaCon 2018" />
    <meta property="og:description" content="Low-Level Systems Programming in High-Level Julia &mdash; JuliaCon 2018, London, UK" />
    <meta property="og:url" content="http://juliacon.org/2018/" />
    <meta property="og:image" content="http://juliacon.org/2018/assets/img/julia-logo-dots.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="1112" />

    <link rel="stylesheet" href="/2018/assets/css/reset.css">
    <link rel="stylesheet" href="/2018/assets/css/util.css">
    <link rel="stylesheet" href="/2018/assets/css/grid.css">
    <link rel="stylesheet" href="/2018/assets/css/type-scale.css">

    <link rel="shortcut icon" type="image/png" href="/favicon.png">

    <script src="https://use.typekit.net/orl3mkt.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link rel="stylesheet" href="/2018/assets/css/style.css">
    <!-- <link href="https://fonts.googleapis.com/css?family=Nunito:200,400,700" rel="stylesheet"> -->

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
</head>
<body>
    
<div class="container-fluid earlybird">
  <div class="container">
    <div class="alert">
       Videos from JuliaCon <a href="https://www.youtube.com/playlist?list=PLP8iPy9hna6Qsq5_-zrg0NTwqDSDYtfQB"> are now available online</a>
    </div>
  </div>
</div>


<div class="u-rows-1 u-hbox u-items-center u-justify-space-between container u-center">
  <div class="u-title-medium u-hpad u-hbox u-items-center u-cols-4" style="margin:auto">
    <a href="/2018/">
        <img src="/2018/assets/img/logo.svg" style="width: 200px; height: auto" title="JuliaCon">
    </a>
    <div class="u-hskip-half"></div>
    <a href="/2018/" class="link-color-inherit">
        <div class="u-title-large u-futura" style="font-size:42px; margin-top: 8px; color: #888">2018</div>
    </a>
  </div>
  <div class="u-futura u-uppercase previous-editions-menu" style="margin:auto">Previous editions: <a href="/2017/">2017</a> | <a href="/2016/">2016</a> | <a href="/2015/">2015</a> | <a href="/2014/">2014</a></div>
</div>


<div class="container-fluid main-menu">
  <div class="container">
    <nav class="navbar navbar-expand-md navbar-dark">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <li>
            <img src="/2018/assets/img/waving-flag.gif" style="position: relative; top: 10pt; height: 60pt; margin-top: -37pt;">
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/2018">JuliaCon 2018</a>
          </li>
          <!-- li class="nav-item">
            <a class="nav-link" href="/2018/cfp">call for proposals</a>
          </li -->
          <li class="nav-item">
            <!-- <a class="nav-link" href="/2018/all_talks.html">talks & workshops</a> -->
            <a class="nav-link" href="/2018/all_talks.html">talks & workshops</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/2018/schedule">schedule</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/2018/tickets.html">buy tickets</a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</div>


<link rel="stylesheet" href="/2018/assets/css/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/2018/assets/css/jssocials.css">
<link rel="stylesheet" href="/2018/assets/css/jssocials-theme-minima.css">

<div class="u-vskip-3"></div>
<div class="u-vskip-2"></div>

<div class="container" id="talk">
  <div class="header-talks">
    <div class="avatar-talks">
      
      <img class="avatar-circle-talks" src="http://avatars.schd.ws/6/8c/5709088/avatar.jpg.320x320px.jpg?5b6">
      
      <div class="speaker-talks">
        Todd Green
        <p class="affiliation">
        
          Relational AI
        
        </p>
      </div>
    </div>
  </div>

  <div class="u-vskip-3"></div>
  <div class="u-vskip-2"></div>

  <hr class="divider" />
  <nav class="navbar">
    <a href="/2018/all_talks.html" class="back-link">⤺ All talks</a>
  </nav>
  <hr class="divider" />

  <div class="content-box-talk">
    <h2>Low-Level Systems Programming in High-Level Julia</h2>

    <p><p>Computer system software, like operating systems, database management systems, or video game engines, has traditionally been implemented in low-level programming languages like C or C++. There are good reasons for this: among them, systems programmers must routinely cope with resource constraints dictating low-level control over memory layouts and memory management. Such concerns are some of the very ones that productivity languages like Julia seek to hide from view.
For example, consider the venerable <a href="https://en.wikipedia.org/wiki/B%2B_tree">B+-tree</a>, which has been used for decades in database systems, file systems, and elsewhere. A B+-tree is a tree-structured index (over, say, file system metadata or SQL tables) aiming to minimize disk I/O for datasets too large to fit in main memory. It achieves this by using large nodes, sized to some multiple of operating system pages, with wide fanout. Because nodes are so wide, the tree is very shallow, and searching from root to leaf incurs just a few disk I/Os. Here’s a picture from Wikipedia (in a real B+-tree, the nodes would contain thousands of entries each and have more intricate internal structure):
<img src="https://upload.wikimedia.org/wikipedia/commons/3/37/Bplustree.png" alt="B+-tree" />B+-tree In a student project, B+-trees could be implemented in a straightforward way, with e.g. search through a node done by deserializing the page’s contents into appropriate heap-allocated data structures in the host language, and then working with those data structures. In a real implementation, however, this is considered unacceptably slow and resource-intensive; instead the page itself is simply “cast” to a C/C++ data structure, for example, and worked with directly. Systems languages are distinguished by their capability to support this style of programming.
At the same time, systems programmers are painfully aware of the productivity limitations of languages like C/C++, and recurrent attempts have been made over the years in nearly every systems context to experiment with the use of higher-level languages. Indeed, the most famous and successful example of this is C itself, which replaced assembly language as the “high-level” systems alternative of its time.
Recently, in database systems, the use of <a href="https://15721.courses.cs.cmu.edu/spring2018/slides/03-compilation.pdf">query compilation</a> (on-the-fly compilation of ad-hoc SQL queries into machine code) has become more or less ubiquitous in high-performance systems. The pain of implementing query compilation in a traditional systems language like C/C++ has motivated researchers to explore the use of higher-level languages like Scala, equipped with staged code generation libraries like <a href="https://scala-lms.github.io/">LMS</a> or <a href="https://github.com/epfldata/squid">Squid</a>, in order to build high-performance systems prototypes.
In such a context, Julia presents an intriguing alternative, due to its excellent performance and well-developed staged metaprogramming facilities. But if we want to build a full-blown database system in Julia, can we also implement low-level data structures like B+-trees in a way that is both idiomatic to Julia (and therefore productive), but also efficient?
In this talk, we answer this question in the affirmative, by showing how such data structures can be implemented with help from a recently-developed package called <a href="https://github.com/RelationalAI-oss/Blobs.jl">Blobs</a> package. Blobs (see also <a href="https://github.com/RelationalAI-oss/ManualMemory.jl">ManualMemory</a>) uses Julia metaprogramming techniques to make it easy and efficient to lay out complex data structures within a memory region, such as an OS page. Data structures are defined as ordinary isbits Julia structs, and can have rich nested structure. Rather than give examples here, take a look at the <a href="https://github.com/RelationalAI-oss/Blobs.jl/blob/master/README.md">package overview</a>.
We’ll give a quick and self-contained overview of the necessary background on paged data structures, and then show how to use Blobs to implement such data structures natively in Julia.
B+-trees are a bit old-fashioned nowadays, so time allowing, we may also try to cover an example of a more recent paged data structure, the <a href="http://supertech.csail.mit.edu/papers/BenderFaJa15.pdf">Bε-tree</a>. This data structure allows a precisely tunable tradeoff between read- and write-performance, and has been used recently in advanced database systems (<a href="https://www.percona.com/software/mysql-database/percona-tokudb">TokuDB</a>, <a href="http://www.logicblox.com/">LogicBlox</a>) and file systems (<a href="http://www.betrfs.org/">BetrFS</a>).</p>
</p>

    <h3>Speaker's bio</h3>
    <p><p>T.J. Green is a Computer Scientist at Relational AI. Previously, he was a Computer Scientist at LogicBlox, and an Assistant Professor at UC Davis. He received his B.S. in Computer Science from Yale University in 1997, his M.S. in Computer Science from the University of Washington in 2001, and his Ph.D. in Computer and Information Science from the University of Pennsylvania in 2009. His awards include Best Student Paper at ICDT 2009, the Morris and Dorothy Rubinoff Award in 2010 (awarded to the outstanding computer science dissertation from the University of Pennsylvania), an honorable mention for the 2011 Jim Gray SIGMOD dissertation award, an NSF CAREER award in 2010, and Best Paper Runner-Up at ICDE 2012. Prior to beginning his Ph.D., he worked at Microsoft as a Software Design Engineer and Development Lead, and at Xyleme as a Software Design Engineer.</p>
</p>

    
  </div>

  <hr class="divider" />

  <div id="share"></div>

  <hr class="divider" />

  <nav class="navbar">
    <a href="/2018/all_talks.html" class="back-link">⤺ All talks</a>
  </nav>
</div>

<div class="u-vskip-3"></div>

<footer class="container-fluid" align="center">
  <div class="container">
    <div class="u-vskip"></div>
    <div class="u-vskip"></div>
    <div class="container">
      <div class="u-body-extra-small">
  <p>© 2014-2020 <a href="http://juliacon.org">JuliaCon.org</a> All rights reserved.
  <a href="https://github.com/JuliaCon/juliacon.github.io">Fork this site on Github</a> or
  open a <a href="https://github.com/JuliaCon/juliacon.github.io/issues">bug report</a>.</p>

</div>

    </div>
    <div class="u-vskip"></div>
  </div>
</footer>

<script src="/2018/assets/js/jssocials.min.js"></script>
<script>
    $("#share").jsSocials({
        shares: ["email", "twitter", "facebook", "linkedin", "googleplus", "stumbleupon", "pocket", "whatsapp"],
        showLabel: false,
        showCount: false,
        shareIn: "popup"
    });
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script src="/2018/assets/js/jquery.sticky.js"></script>
    <script src="/2018/assets/js/juliacon.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-28835595-3', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
    </script>
</body>
</html>
